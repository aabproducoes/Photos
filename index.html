<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Photo Gallery</title>
<style>
/* ---------- RESET ---------- */
*{box-sizing:border-box;margin:0;padding:0}
body{
  background:#000;
  color:#fff;
  font-family:sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  overflow:hidden;
}

/* ---------- TOP BAR ---------- */
header{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:40px; /* Reduced height */
  line-height:40px;
  text-align:center;
  background:rgba(0,0,0,.85);
  z-index:1000;
}

/* ---------- GALLERY / CATEGORY ---------- */
.gallery-container{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100vh;
  gap:5px; /* Tighter gap */
}
.category{
  position:relative;
  width:100%;
  height:38%; /* Tighter height */
  display:flex;
  justify-content:center;
  align-items:center;
  perspective:800px;
}

/* Category titles */
.category h2{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  padding:6px 10px; /* Smaller padding */
  background:rgba(0,0,0,.6);
  border-radius:4px;
  pointer-events:none;
  text-align:center;
  font-size:1rem; /* Smaller font */
}
.category:first-child h2{top:0;}
.category:last-child h2{bottom:0;}

/* ---------- PHOTO CARD ---------- */
.hand{
  display:flex;
  justify-content:center;
  gap:8px; /* Tighter gap */
  position:relative; /* Allow card overlap */
}
.photo{
  position:relative;
  width:160px; /* Smaller cards */
  aspect-ratio:1/1;
  overflow:hidden;
  border-radius:6px;
  isolation:isolate;
  transform:rotate(0deg);
  transform-origin:center bottom;
  opacity:1;
  transition:transform .5s ease, opacity .5s ease; /* Faster transition */
}
/* Fan out cards with overlap */
.hand .photo:nth-child(1){
  transform:rotate(-6deg);
  left:-10px; /* Slight overlap */
  z-index:1;
}
.hand .photo:nth-child(2){
  transform:rotate(0deg);
  z-index:2;
}
.hand .photo:nth-child(3){
  transform:rotate(6deg);
  left:10px; /* Slight overlap */
  z-index:1;
}
/* Flip bottom category cards */
.category:last-child .photo{
  transform:scaleY(-1) rotate(0deg);
}
.category:last-child .hand .photo:nth-child(1){
  transform:scaleY(-1) rotate(-6deg);
  left:-10px;
}
.category:last-child .hand .photo:nth-child(2){
  transform:scaleY(-1) rotate(0deg);
}
.category:last-child .hand .photo:nth-child(3){
  transform:scaleY(-1) rotate(6deg);
  left:10px;
}

.photo img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}
.photo:hover img{filter:brightness(.8);}
.photo:hover{
  transform:scale(1.2); /* Larger zoom for emphasis */
  z-index:10;
}

/* Caption */
.preview{
  position:absolute;
  left:0;
  right:0;
  bottom:60px; /* Adjusted for smaller cards */
  padding:5px 3px; /* Smaller padding */
  background:linear-gradient(to top,rgba(0,0,0,.85),rgba(0,0,0,.3));
  transform:translateY(140%);
  transition:.3s;
  text-align:center;
  font-size:.8rem; /* Smaller font */
  white-space:normal;
  color:#fff;
  z-index:2;
  pointer-events:none;
}
.photo:hover .preview{transform:translateY(0);}
.category:last-child .preview{
  transform:scaleY(-1) translateY(-140%);
}
.category:last-child .photo:hover .preview{transform:scaleY(-1) translateY(0);}
</style>
</head>
<body>

<header id="topbar">Photos</header>

<div class="gallery-container" id="gallery"></div>

<script>
(async () => {
  /* ---------- LOAD JSON ---------- */
  const data = await fetch('photos.json').then(r=>r.json());
  const gallery = document.getElementById('gallery');

  // Take only the first two categories
  data.categories.slice(0,2).forEach((cat, index) => {
    const sec=document.createElement('section');
    sec.className='category';
    sec.innerHTML=`
      <h2>${cat.name}</h2>
      <div class="hand">
        ${cat.photos.slice(0,3).map(p=>`
          <figure class="photo">
            <img src="${p.url}" alt="${p.alt}" loading="lazy">
            <figcaption class="preview">${p.title}</figcaption>
          </figure>`).join('')}
      </div>`;
    gallery.appendChild(sec);
  });

  /* Neon borders */
  document.querySelectorAll('.photo').forEach(card=>{
    const h=Math.floor(Math.random()*360);
    const neon=`hsl(${h} 100% 50%)`;
    card.style.boxShadow=`inset 0 0 8px 1px ${neon},0 0 8px 2px ${neon}`; /* Reduced shadow */
  });
})();
</script>
</body>
</html>
