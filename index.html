<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Photo Gallery – Sliding Images</title>
<style>
/* ---------- RESET ---------- */
*{box-sizing:border-box;margin:0;padding:0}
body{background:#000;color:#fff;font-family:sans-serif;overflow:hidden}

/* ---------- TOP BAR ---------- */
header{
  position:fixed;top:0;left:0;width:100%;height:50px;line-height:50px;
  text-align:center;background:rgba(0,0,0,.85);z-index:1000;
  transition:transform .45s cubic-bezier(.55,.06,.68,.19)
}
header.hidden{transform:translateY(-100%)}

/* ---------- FRAME / CONTAINER ---------- */
.gallery-container{
  position:relative;          /* categories will be absolute inside */
  height:100vh;               /* viewport frame never moves         */
  overflow:hidden;
}

/* ---------- CATEGORY  (one photo grid) ---------- */
.category{
  position:absolute;top:0;left:0;width:100%;
  height:50vh;                                   /* 2 stack inside frame */
  display:flex;flex-direction:column;gap:8px;
  pointer-events:none;                           /* clicks pass to photos */
  transition:transform .7s ease;                 /* slide animation      */
}

/* centered title overlay */
.category h2{
  position:absolute;top:50%;left:50%;
  transform:translate(-50%,-50%);
  padding:8px 12px;background:rgba(0,0,0,.6);
  border-radius:4px;pointer-events:none
}

/* ---------- PHOTO GRID ---------- */
.grid{
  flex:1;
  display:grid;gap:8px;padding:0 8px;margin-top:auto;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr))
}
.photo{
  position:relative;width:100%;aspect-ratio:1/1;overflow:hidden;
  border-radius:6px;isolation:isolate;transition:transform .25s
}
.photo img{width:100%;height:100%;object-fit:cover;display:block}
.photo:hover img{filter:brightness(.8)}
.photo:hover{transform:scale(1.03)}

.preview{
  position:absolute;left:0;right:0;bottom:100px;
  padding:6px 4px;background:linear-gradient(to top,rgba(0,0,0,.85),rgba(0,0,0,.3));
  transform:translateY(140%);transition:.3s;
  text-align:center;font-size:.9rem;color:#fff;
  pointer-events:none;z-index:2
}
.photo:hover .preview{transform:translateY(0)}

/* ---------- NAV BUTTONS ---------- */
.nav{
  position:fixed;right:10px;top:50%;transform:translateY(-50%);
  display:flex;flex-direction:column;gap:8px;z-index:1001
}
.nav button{
  width:36px;height:36px;border:none;border-radius:50%;
  background:#0ff;color:#000;font-size:1.2rem;cursor:pointer
}
.nav button:hover:not(:disabled){background:#5ff}
.nav button:disabled{background:#333;color:#777;cursor:not-allowed}
</style>
</head>
<body>

<header id="topbar">Photos</header>

<div class="gallery-container" id="gallery"></div>

<div class="nav">
  <button id="up"   disabled>↑</button>
  <button id="down">↓</button>
</div>

<script>
(async () => {
  const data = await fetch('photos.json').then(r=>r.json());
  const gallery = document.getElementById('gallery');

  /* ==== build categories ===== */
  data.categories.forEach((cat,i)=>{
    const s=document.createElement('section');
    s.className='category';
    s.innerHTML=`
      <h2>${cat.name}</h2>
      <div class="grid">
        ${cat.photos.map(p=>`
        <figure class="photo">
          <img src="${p.url}" alt="${p.alt}" loading="lazy">
          <figcaption class="preview">${p.title}</figcaption>
        </figure>`).join('')}
      </div>`;
    gallery.appendChild(s);
  });

  const cats=[...document.querySelectorAll('.category')];

  /* ==== neon borders per image ==== */
  document.querySelectorAll('.photo').forEach(card=>{
    const hue=Math.floor(Math.random()*360);
    const neon=`hsl(${hue} 100% 50%)`;
    card.style.boxShadow=`inset 0 0 12px 2px ${neon},0 0 12px 4px ${neon}`;
  });

  /* ==== sliding logic ===== */
  const step=50;            // each category height in vh
  let idx=0;
  const maxIdx=cats.length-2;
  const up=document.getElementById('up');
  const down=document.getElementById('down');
  const bar=document.getElementById('topbar');

  function positionCats(){
    cats.forEach((c,i)=>{
      c.style.transform=`translateY(${(i-idx)*step}vh)`;  // slide each grid
    });
    up.disabled   = idx===0;
    down.disabled = idx===maxIdx;
  }
  positionCats();

  function go(to){
    idx=to;
    positionCats();
  }
  up.addEventListener('click',()=>idx>0&&go(idx-1));
  down.addEventListener('click',()=>idx<maxIdx&&go(idx+1));

  /* wheel to slide */
  let lock=false;
  gallery.addEventListener('wheel',e=>{
    e.preventDefault();
    if(lock)return;
    lock=true;setTimeout(()=>lock=false,280);
    (e.deltaY>0?down:up).click();
  },{passive:false});

  /* hide bar on first motion */
  let firstMove=false;
  function hideBar(){
    if(firstMove) return;
    firstMove=true;
    bar.classList.add('hidden');
  }
  up.addEventListener('click',hideBar);
  down.addEventListener('click',hideBar);
  gallery.addEventListener('wheel',hideBar,{passive:false});
})();
</script>
</body>
</html>
