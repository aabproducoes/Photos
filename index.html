<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Photo Gallery</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box }
    body { background:#000; overflow:hidden; font-family:sans-serif; }
    .gallery-container {
      height:100vh;
      overflow:hidden;
      position:relative;
    }
    .category {
      height:50vh;               /* exactly half the viewport */
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .category h2 {
      padding:8px;
      color:#fff;
      background:rgba(0,0,0,0.5);
      text-align:center;
    }
    .grid {
      flex:1;
      display:grid;
      gap:8px;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      padding:0 8px;
    }
    .grid img {
      width:100%; height:100%; object-fit:cover; border-radius:4px;
    }
    .nav {
      position:fixed;
      top:50%; right:10px;
      transform:translateY(-50%);
      display:flex; flex-direction:column; gap:8px;
    }
    .nav button {
      width:36px; height:36px;
      border:none; border-radius:50%;
      background:#0ff; color:#000;
      font-size:1.2rem; cursor:pointer;
    }
    .nav button:disabled {
      background:#333; color:#777; cursor:not-allowed;
    }
  </style>
</head>
<body>

<div class="gallery-container" id="gallery"></div>

<div class="nav">
  <button id="up" disabled>↑</button>
  <button id="down">↓</button>
</div>

<script>
(async () => {
  // 1) Load your photos.json
  const data = await fetch('photos.json').then(r => r.json());
  const gallery = document.getElementById('gallery');

  // 2) Build the sections
  data.categories.forEach(cat => {
    const sec = document.createElement('section');
    sec.className = 'category';
    sec.innerHTML = `
      <h2>${cat.name}</h2>
      <div class="grid">
        ${cat.photos.map(p => `<img src="${p.url}" alt="${p.alt}" loading="lazy">`).join('')}
      </div>`;
    gallery.appendChild(sec);
  });

  // 3) Paging logic (step = exactly 50vh)
  const cats    = document.querySelectorAll('.category');
  const step    = window.innerHeight / 2;
  const maxIdx  = cats.length - 2;
  let   idx     = 0;
  const upBtn   = document.getElementById('up');
  const downBtn = document.getElementById('down');

  function updateButtons() {
    upBtn.disabled   = idx === 0;
    downBtn.disabled = idx === maxIdx;
  }
  function goTo(i) {
    gallery.scrollTo({ top: i * step, behavior: 'smooth' });
    idx = i; updateButtons();
  }

  upBtn.addEventListener('click',   () => idx>0    && goTo(idx-1));
  downBtn.addEventListener('click', () => idx<maxIdx && goTo(idx+1));

  // 4) Mouse wheel paging (throttled)
  let busy = false;
  gallery.addEventListener('wheel', e => {
    e.preventDefault();
    if (busy) return;
    busy = true;
    setTimeout(() => busy = false, 300);
    if (e.deltaY > 0) downBtn.click();
    else              upBtn.click();
  }, { passive:false });

  updateButtons();
})();
</script>

</body>
</html>
